<!-- Path: index.html -->
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Podcast: Derecho a la educaci√≥n ‚Äî Proyecto escolar</title>
<meta name="description" content="Podcast 'Derecho a la educaci√≥n' - proyecto escolar para la materia Ciencias Sociales. Audio, transcripci√≥n y controles accesibles." />
<link rel="stylesheet" href="" />
<style>
  :root{
    --bg:#ffffff; --fg:#111827; --muted:#6b7280; --accent:#115e59;
    --card:#f8fafc; --radius:12px; --shadow:0 6px 18px rgba(15,23,42,0.08);
    --font-scale: 1;
  }
  [data-dark="true"]{
    --bg:#0b1220; --fg:#e6eef6; --muted:#9aa9b6; --card:#071225; --accent:#4dd0c8;
    --shadow: none;
  }
  [data-high-contrast="true"]{
    --bg:#000; --fg:#fff; --muted:#fff; --accent:#ffff00;
  }
  html{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; font-size:16px; background:var(--bg); color:var(--fg);}
  body{margin:0; padding:24px; line-height:1.45; font-size:calc(1rem * var(--font-scale));}
  .container{max-width:900px; margin:0 auto;}
  header{display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:18px;}
  .title{display:flex; gap:12px; align-items:center;}
  h1{margin:0;font-size:1.4rem;}
  .meta{color:var(--muted); font-size:0.95rem;}
  .controls-top{display:flex; gap:8px; align-items:center;}
  button, .btn{background:var(--accent); color:var(--bg); border:none; padding:8px 10px; border-radius:8px; cursor:pointer;}
  .btn.secondary{background:transparent; color:var(--fg); border:1px solid rgba(0,0,0,0.08);}
  .card{background:var(--card); padding:16px; border-radius:var(--radius); box-shadow:var(--shadow); margin-bottom:14px;}
  .player{display:flex; flex-direction:column; gap:12px;}
  .player-row{display:flex; gap:8px; align-items:center;}
  .bigplay{width:52px;height:52px;border-radius:10px;font-size:18px;display:grid;place-items:center;}
  .small-btn{padding:6px 8px;border-radius:8px;}
  .progress{width:100%; height:10px; background:rgba(0,0,0,0.08); border-radius:6px; position:relative; cursor:pointer;}
  .progress > .bar{height:100%; background:var(--accent); width:0%; border-radius:6px;}
  .time{font-size:0.9rem;color:var(--muted); min-width:70px; text-align:right;}
  .row-space{display:flex; justify-content:space-between; align-items:center;}
  .transcript{white-space:pre-wrap; font-family:inherit; background:rgba(0,0,0,0.02); padding:12px; border-radius:8px; max-height:260px; overflow:auto;}
  .transcript .line{padding:6px; border-radius:6px;}
  .transcript .line.active{background:rgba(17,94,89,0.12);}
  footer{margin-top:18px; font-size:0.95rem; color:var(--muted);}
  .access-menu{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .sr-only{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;}
  @media (max-width:640px){body{padding:12px} .title h1{font-size:1.1rem}}
</style>
</head>
<body>
<div class="container" id="app" data-dark="false" data-high-contrast="false" style="--font-scale:1;">
  <header>
    <div class="title">
      <img src="" alt="" style="width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#e0f2f1,#b2dfdb)" aria-hidden="true" />
      <div>
        <h1>Podcast: Derecho a la educaci√≥n</h1>
        <div class="meta"># audio en contenido ¬∑ # derecho ¬∑ # proyecto escolar ¬∑ # educaci√≥n</div>
      </div>
    </div>

    <div class="controls-top" role="toolbar" aria-label="Controles de accesibilidad y visualizaci√≥n">
      <div class="access-menu" aria-hidden="false">
        <button id="btnDark" title="Alternar modo oscuro">üåì Modo oscuro</button>
        <button id="btnContrast" title="Alto contraste">‚ö´‚ö™ Alto contraste</button>
        <button id="btnAplus" title="Aumentar tama√±o de letra">A+</button>
        <button id="btnAminus" title="Disminuir tama√±o de letra">A-</button>
        <button id="btnAreset" title="Restablecer tama√±o de letra">Reset A</button>
      </div>
    </div>
  </header>

  <main>
    <section class="card" aria-labelledby="episodetitle">
      <a href="index.html">¬°ira a la p√°jina prinsipal!<a href="http://" target="_blank" rel="noopener noreferrer"></a></a>
      <h2 id="episodetitle">Episodio: "Derecho a la educaci√≥n"</h2>
      <p class="meta" id="publishMeta">Publicado: <time id="pubdate">30 de noviembre de 2025 ‚Äî 10:00 (America/Mexico_City)</time></p>
      <p><strong>Descripci√≥n:</strong> Este episodio explora el derecho a la educaci√≥n, su importancia, barreras y propuestas en el marco de un proyecto escolar para la asignatura de Ciencias Sociales. Contiene , an√°lisis y ejemplos pr√°cticos.</p>
      <p><em>Nota:</em> Proyecto escolar ‚Äî materia: <strong>Ciencias Sociales</strong>.</p>
    </section>

    <section class="card player" aria-label="Reproductor de audio">
      <!-- Audio element (archivo local) -->
      <audio id="audio" preload="metadata" src="potcas derecho a la educasi√≥n.mp3"></audio>

      <div class="player-row row-space">
        <div style="display:flex; align-items:center; gap:12px;">
          <button id="btnPlay" class="bigplay" aria-label="Reproducir" title="Reproducir / Pausar">‚ñ∂Ô∏è</button>

          <div style="display:flex;gap:6px;align-items:center;">
            <button id="btnRew" class="small-btn" aria-label="Retroceder 10 segundos" title="Retroceder 10s">‚ü≤ -10s</button>
            <button id="btnFwd" class="small-btn" aria-label="Adelantar 10 segundos" title="Adelantar 10s">+10s ‚ü≥</button>
            <button id="btnLoop" class="small-btn" aria-label="Alternar repetici√≥n" title="Repetir">üîÅ</button>
          </div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;">
          <label for="speed" class="sr-only">Velocidad</label>
          <select id="speed" aria-label="Seleccionar velocidad de reproducci√≥n">
            <option value="0.75">0.75√ó</option>
            <option value="1" selected>1√ó</option>
            <option value="1.25">1.25√ó</option>
            <option value="1.5">1.5√ó</option>
          </select>

          <label for="volume" class="sr-only">Volumen</label>
          <input id="volume" type="range" min="0" max="1" step="0.01" value="1" aria-label="Control de volumen" style="width:120px">
          <button id="btnMute" class="small-btn" aria-label="Silenciar" title="Silenciar">üîä</button>

          <a id="download" class="btn" download="potcas-derecho-a-la-educacion.wav" href="potcas derecho a la educasi√≥n.wav" title="Descargar audio">‚¨áÔ∏è Descargar</a>
        </div>
      </div>

      <div class="player-row" style="gap:12px; align-items:center;">
        <div style="flex:1">
          <div class="progress" id="progress" role="progressbar" aria-label="Barra de progreso" aria-valuemin="0" aria-valuemax="100" tabindex="0">
            <div class="bar" id="progressBar" style="width:0%"></div>
          </div>
        </div>
        <div class="time" aria-live="polite"><span id="current">0:00</span> / <span id="duration">0:00</span></div>
      </div>

      <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
        <button id="btnTranscript" class="btn secondary" title="Mostrar / ocultar transcripci√≥n">üìù Ver transcripci√≥n</button>
        <button id="btnShare" class="btn secondary" title="Compartir enlace">üîó Compartir</button>
      </div>

    </section>

    <section class="card" id="transcriptCard" style="display:none;" aria-hidden="true">
      <h3>Transcripci√≥n</h3>
      <div class="transcript" id="transcript" tabindex="0">
        <!-- Cada l√≠nea puede tener data-start en segundos -->
        <div class="line" data-start="0">[00:00] Introducci√≥n ‚Äî Bienvenidos al podcast sobre el derecho a la educaci√≥n.</div>
        <div class="line" data-start="12">[00:12] En este episodio discutimos qu√© significa el derecho a la educaci√≥n y por qu√© es esencial para el desarrollo social.</div>
        <div class="line" data-start="38">[00:38] Barreras comunes: acceso econ√≥mico, discriminaci√≥n, falta de infraestructura.</div>
        <div class="line" data-start="72">[01:12] Propuestas escolares y comunitarias para mejorar el acceso.</div>
        <div class="line" data-start="125">[02:05] Cierre ‚Äî Agradecimientos y referencias.</div>
      </div>
      <p class="meta">Locutor: <strong>Yo (la persona que subi√≥ el audio)</strong>. Colaboradores: <strong>Megan Michey</strong> ‚Äî proporcion√≥ el guion.</p>
    </section>

    <section class="card" aria-label="M√°s informaci√≥n">
      <h3>Informaci√≥n adicional</h3>
      <p>Este episodio forma parte de un <strong>proyecto escolar</strong> para la asignatura <strong>Ciencias Sociales</strong>. Si usas o compartes este contenido, respeta la licencia abajo indicada.</p>
      <p>Licencia: <strong>Creative Commons Attribution-NoDerivatives 4.0 International (CC BY-ND 4.0)</strong> ‚Äî permite distribuir el contenido sin modificarlo, con atribuci√≥n.</p>
    </section>

    <footer class="card" aria-label="Colaboradores y aviso legal">
      <strong>Colaboradores</strong>
      <ul>
        <li>Megan Michey ‚Äî proporcion√≥ el guion.</li>
        <li>Locutor: Yo (la persona que habla en el audio).</li>
      </ul>
      <p>Contenido protegido bajo <em>Creative Commons</em> (CC BY-ND 4.0). Se permite distribuir el contenido siempre que no se modifique y se atribuya al autor.</p>
      <p>¬© <span id="year"></span> ‚Äî Proyecto escolar.</p>
    </footer>
  </main>
</div>

<script>
/* TL;DR: JS controla el reproductor y accesibilidad. */
(() => {
  const audio = document.getElementById('audio');
  const btnPlay = document.getElementById('btnPlay');
  const btnRew = document.getElementById('btnRew');
  const btnFwd = document.getElementById('btnFwd');
  const btnLoop = document.getElementById('btnLoop');
  const btnMute = document.getElementById('btnMute');
  const progress = document.getElementById('progress');
  const progressBar = document.getElementById('progressBar');
  const current = document.getElementById('current');
  const duration = document.getElementById('duration');
  const speed = document.getElementById('speed');
  const volume = document.getElementById('volume');
  const btnTranscript = document.getElementById('btnTranscript');
  const transcriptCard = document.getElementById('transcriptCard');
  const transcript = document.getElementById('transcript');
  const btnDark = document.getElementById('btnDark');
  const btnContrast = document.getElementById('btnContrast');
  const btnAplus = document.getElementById('btnAplus');
  const btnAminus = document.getElementById('btnAminus');
  const btnAreset = document.getElementById('btnAreset');
  const app = document.getElementById('app');
  const download = document.getElementById('download');
  const btnShare = document.getElementById('btnShare');
  const btnLoopEl = document.getElementById('btnLoop');

  // fecha din√°mica
  document.getElementById('year').textContent = new Date().getFullYear();
  // publicacion: mostrar fecha actual en zona del usuario
  const pubdate = new Date();
  const opt = { year:'numeric', month:'long', day:'numeric', hour:'2-digit', minute:'2-digit', timeZone:'America/Mexico_City' };
  document.getElementById('pubdate').textContent = pubdate.toLocaleString('es-ES', opt) + ' (America/Mexico_City)';

  // Play/pause toggle
  function updatePlayButton(){
    btnPlay.textContent = audio.paused ? '‚ñ∂Ô∏è' : '‚è∏Ô∏è';
    btnPlay.title = audio.paused ? 'Reproducir' : 'Pausar';
  }
  btnPlay.addEventListener('click', ()=> audio.paused ? audio.play() : audio.pause());
  audio.addEventListener('play', updatePlayButton);
  audio.addEventListener('pause', updatePlayButton);
  audio.addEventListener('loadedmetadata', ()=> {
    duration.textContent = formatTime(audio.duration || 0);
  });

  // Rewind / Forward 10s
  btnRew.addEventListener('click', ()=> audio.currentTime = Math.max(0, audio.currentTime - 10));
  btnFwd.addEventListener('click', ()=> audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 10));

  // Loop
  btnLoop.addEventListener('click', ()=> {
    audio.loop = !audio.loop;
    btnLoopEl.style.opacity = audio.loop ? '1' : '0.6';
  });

  // Volume & mute
  volume.addEventListener('input', e => { audio.volume = parseFloat(e.target.value); if(audio.volume === 0) btnMute.textContent='üîà'; else btnMute.textContent='üîä'; });
  btnMute.addEventListener('click', ()=> {
    audio.muted = !audio.muted;
    btnMute.textContent = audio.muted ? 'üîà' : 'üîä';
  });

  // Speed
  speed.addEventListener('change', e => audio.playbackRate = parseFloat(e.target.value));

  // Progress bar
  function formatTime(t){
    if(!isFinite(t)) return '0:00';
    t = Math.floor(t);
    const m = Math.floor(t/60);
    const s = t%60;
    return `${m}:${s.toString().padStart(2,'0')}`;
  }
  audio.addEventListener('timeupdate', ()=> {
    const pct = (audio.currentTime / (audio.duration || 1)) * 100;
    progressBar.style.width = pct + '%';
    current.textContent = formatTime(audio.currentTime);
    progress.setAttribute('aria-valuenow', Math.floor(pct));
    // highlight transcript line
    const lines = transcript.querySelectorAll('.line');
    lines.forEach(l => {
      const start = parseFloat(l.getAttribute('data-start')||0);
      const next = (l.nextElementSibling && parseFloat(l.nextElementSibling.getAttribute('data-start'))) || (audio.duration || 1);
      if(audio.currentTime >= start && audio.currentTime < next) {
        l.classList.add('active');
        // scroll into view smoothly within transcript
        if(transcriptCard.style.display !== 'none') l.scrollIntoView({behavior:'smooth', block:'nearest'});
      } else l.classList.remove('active');
    });
  });

  // Click/keyboard on progress to seek
  function seekFromEvent(e){
    const rect = progress.getBoundingClientRect();
    const x = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
    const pct = Math.max(0, Math.min(1, x / rect.width));
    audio.currentTime = pct * (audio.duration || 0);
  }
  progress.addEventListener('click', seekFromEvent);
  progress.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft') audio.currentTime = Math.max(0, audio.currentTime - 5);
    if(e.key === 'ArrowRight') audio.currentTime = Math.min(audio.duration || 0, audio.currentTime + 5);
  });

  // Transcript toggle and seek on click line
  btnTranscript.addEventListener('click', ()=>{
    const shown = transcriptCard.style.display !== 'none';
    transcriptCard.style.display = shown ? 'none' : 'block';
    transcriptCard.setAttribute('aria-hidden', shown ? 'true' : 'false');
    btnTranscript.textContent = shown ? 'üìù Ver transcripci√≥n' : 'üìù Ocultar transcripci√≥n';
  });
  transcript.addEventListener('click', e => {
    const line = e.target.closest('.line');
    if(line){
      const t = parseFloat(line.getAttribute('data-start')||0);
      audio.currentTime = t;
      if(audio.paused) audio.play();
    }
  });

  // Accessibility controls: dark mode, high contrast, font size
  const storedDark = localStorage.getItem('podcast_dark') === 'true';
  if(storedDark) app.setAttribute('data-dark','true');
  btnDark.addEventListener('click', ()=>{
    const is = app.getAttribute('data-dark') === 'true';
    app.setAttribute('data-dark', (!is).toString());
    localStorage.setItem('podcast_dark', (!is).toString());
  });

  btnContrast.addEventListener('click', ()=>{
    const is = app.getAttribute('data-high-contrast') === 'true';
    app.setAttribute('data-high-contrast', (!is).toString());
  });

  function changeFontScale(delta){
    let v = parseFloat(getComputedStyle(app).getPropertyValue('--font-scale')) || 1;
    v = Math.max(0.75, Math.min(1.5, v + delta));
    app.style.setProperty('--font-scale', v);
    localStorage.setItem('podcast_fontscale', v.toString());
  }
  btnAplus.addEventListener('click', ()=> changeFontScale(0.1));
  btnAminus.addEventListener('click', ()=> changeFontScale(-0.1));
  btnAreset.addEventListener('click', ()=>{
    app.style.setProperty('--font-scale', 1);
    localStorage.removeItem('podcast_fontscale');
  });
  // restore font scale
  const storedScale = localStorage.getItem('podcast_fontscale');
  if(storedScale) app.style.setProperty('--font-scale', storedScale);

  // Share button (simple)
  btnShare.addEventListener('click', async () => {
    const url = location.href;
    try {
      await navigator.share?.({ title: document.title, text: 'Podcast: Derecho a la educaci√≥n', url });
    } catch (err) {
      // fallback: copy to clipboard
      await navigator.clipboard?.writeText(url);
      alert('Enlace copiado al portapapeles.');
    }
  });

  // Keyboard friendly: space toggles play/pause when focus not on input
  document.addEventListener('keydown', (e)=>{
    const active = document.activeElement;
    const inputs = ['INPUT','TEXTAREA','SELECT'];
    if(e.code === 'Space' && !inputs.includes(active.tagName)){
      e.preventDefault();
      audio.paused ? audio.play() : audio.pause();
    }
  });

  // Download link: ensure proper filename (sanitizada)
  download.addEventListener('click', ()=>{
    // nothing extra; href points to file
  });

  // small UX: update times on durationchange
  audio.addEventListener('durationchange', ()=> {
    duration.textContent = formatTime(audio.duration || 0);
  });

  // initialize UI
  updatePlayButton();
})();
</script>
</body>
</html>
